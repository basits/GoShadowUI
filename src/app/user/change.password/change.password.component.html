<secure-header *ngIf="isLogin"></secure-header>
<section class="content-block">
    <div class="col-lg-12 col-md-12 col-xs-12 tr-campaign" *ngIf="!edit">
        <mat-card class="two-row-card">
            <div class="tr-sec-box">
                <div class="col-md-6">
                        <mat-progress-bar *ngIf='isSubmitted' color="warn" mode="indeterminate"></mat-progress-bar>
                        <mat-card-title>Change Password</mat-card-title>
                        <form [formGroup]="form" #f="ngForm">
        
                            <!--Current Password -->
        
                            <div class="form-field">
                                <mat-form-field class="full-width">
        
                                    <input matInput type="password" formControlName="currentPassword" placeholder="Current Password" maxlength="20" name="currentPassword"
                                        [(ngModel)]="currentPass" [type]="phide ? 'password' : 'text'" (focusout)="onCurrentPasswordFocusOut()" required>
                                    <mat-icon matSuffix (click)="phide = !phide">{{phide ? 'visibility' : 'visibility_off'}}</mat-icon>
                                    <mat-hint align="end">{{currentPass?.length || 0}}/20</mat-hint>
        
                                    <mat-error *ngIf="form.controls['currentPassword'].errors?.required">
                                        Current Password is
                                        <strong>required</strong>
                                    </mat-error>
                                </mat-form-field>
                            </div>
        
                            <!--New Password -->
        
                            <div class="form-field">
                                <mat-form-field class="full-width">
        
                                    <input matInput type="password" formControlName="newPassword" placeholder="New Password" maxlength="20" name="newPassword"
                                        [(ngModel)]="newPass" [type]="nphide ? 'password' : 'text'" matTooltip='Password should be min 8 digit , max 20 digit and combination of alphanumberic and specified special characters (!@#$%^&*_+) with 1 uppercase letter, 1 lowercase letter and  1 numeric character'
                                        (focusout)="onNewPasswordFocusOut()" required>
                                    <mat-icon matSuffix (click)="nphide = !nphide">{{nphide ? 'visibility' : 'visibility_off'}}</mat-icon>
                                    <mat-hint align="end">{{newPass?.length || 0}}/20</mat-hint>
        
                                    <mat-error *ngIf="form.controls['newPassword'].errors?.pattern || form.controls['newPassword'].errors?.maxLength">
                                        Please enter a valid password
                                    </mat-error>
                                    <mat-error *ngIf="form.controls['newPassword'].errors?.required">
                                        New Password is
                                        <strong>required</strong>
                                    </mat-error>
                                </mat-form-field>
                            </div>
        
                            <!--Confirm Password -->
                            <div class="form-field">
                                <mat-form-field class="full-width">
                                    <input matInput type="password" formControlName="confirmPassword" placeholder="Confirm Password" maxlength="20" name="confirmPassword"
                                        [(ngModel)]="confirmPass" [type]="cphide ? 'password' : 'text'" (focusout)="onConfirmPasswordFocusOut()" required>
                                    <mat-icon matSuffix (click)="cphide = !cphide">{{cphide ? 'visibility' : 'visibility_off'}}</mat-icon>
                                    <mat-hint align="end">{{confirmPass?.length || 0}}/20</mat-hint>
        
                                    <mat-error *ngIf="form.controls['confirmPassword'].errors?.required">
                                        Confirm Password is
                                        <strong>required</strong>
                                    </mat-error>
                                    <mat-error *ngIf="form.controls['confirmPassword'].errors?.matchPassword">
                                        Confirm Password does not
                                        <strong>match</strong>
                                    </mat-error>
        
                                </mat-form-field>
        
                                <mat-error *ngIf="errMsg">
                                    <h4> {{ errMsg }}</h4>
                                </mat-error>
                            </div>
                            <div class="text-right">
                                <button mat-raised-button color="primary" class="round-btn login" [disabled]="!form.valid || errMsg || isSubmitted" (click)="onClickReset()">Change Password</button>
                            </div>
                        </form>        
                </div>
            </div>
        </mat-card>
    </div>

</section>